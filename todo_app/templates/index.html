{% extends "layout.html" %}
{% block title %}To-Do App{% endblock %}

{% block content %}
  <div class="jumbotron">
    <h1 class="display-4">To-Do App</h1>
    <p class="lead">My TODO tracker</p>
  </div>
  {%if route=='display'%}
  <div class="row">
    <div class="col-md-12">
      <h2>Items</h2>
      <ul class="list-group mb-4">
        <!-- List the todo items here -->
        
        <table>
          <th>ID</th><th>Title</th><th>Status</th>
          {%for item in items%}
          <tr>
            <td>{{item['id ']}}</td>
            <td>{{item['name']}}</td>
            <td>{{item['listname']}}</td>
            <td><a href="/update?id={{item['id']}}"> Update </a></td>
            <td><a href="/delete?id={{item['id']}}"> Delete </a></td>
          </tr>
          {%endfor%}
        </table>
        <a href = "/add"> Add a task</a>
      </ul>
    </div>
  </div>
  {%endif%}
  {%if route=='add'%}
  <div class="row">
    <div class="col-md-12">
      <form name="Add Todo" method = "POST">
        <label for="taskname">Task Title : </label><br>
        <input type="text" id="taskname" name="taskname"><br>
        <select name="status" id="status">
          {%for status in statuses%}
          <option value={{ status['id'] }}>{{ status['name'] }}</option>
          {%endfor%}
          </select><br>
        <input type="submit" value = "Save">
      </form>
    </div>
  </div>
  {%endif%}
  {%if route=='update'%}
  <div class="row">
    <div class="col-md-12">
      <form name="Update Todo" method = "POST">
        <input type="hidden" id="id" name="id" value = "{{item['id']}}">
        <label for="taskname">Task Title : </label><br>
        <input type="text" id="taskname" name="taskname" value = "{{item['name']}}"><br>
        <select name="status" id="status">
          {%for status in statuses%}
          <option value={{ status['id'] }} selected>{{ status['name'] }}</option>
          {%endfor%}
          </select><br>
        <input type="submit" value = "Save">
      </form>

    </div>
  </div>
  {%endif%}
{% endblock %}